{"remainingRequest":"/Users/apple/Desktop/课程/Java/java课程设计/charging_station/web/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/课程/Java/java课程设计/charging_station/web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/apple/Desktop/课程/Java/java课程设计/charging_station/web/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/apple/Desktop/课程/Java/java课程设计/charging_station/web/src/views/user/account/UserAccountLoginView.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/apple/Desktop/课程/Java/java课程设计/charging_station/web/src/views/user/account/UserAccountLoginView.vue","mtime":1669902995374},{"path":"/Users/apple/Desktop/课程/Java/java课程设计/charging_station/web/babel.config.js","mtime":1668068781058},{"path":"/Users/apple/Desktop/课程/Java/java课程设计/charging_station/web/node_modules/cache-loader/dist/cjs.js","mtime":1668068760194},{"path":"/Users/apple/Desktop/课程/Java/java课程设计/charging_station/web/node_modules/babel-loader/lib/index.js","mtime":1668068763847},{"path":"/Users/apple/Desktop/课程/Java/java课程设计/charging_station/web/node_modules/cache-loader/dist/cjs.js","mtime":1668068760194},{"path":"/Users/apple/Desktop/课程/Java/java课程设计/charging_station/web/node_modules/vue-loader-v16/dist/index.js","mtime":1668068761558}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBDb250ZW50QmFzZSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL0NvbnRlbnRCYXNlLnZ1ZSc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vLi4vLi4vcm91dGVyL2luZGV4JzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENvbnRlbnRCYXNlCiAgfSwKICBzZXR1cCgpIHsKICAgIGNvbnN0IHN0b3JlID0gdXNlU3RvcmUoKTsKICAgIGxldCB1c2VybmFtZSA9IHJlZignJyk7CiAgICBsZXQgcGFzc3dvcmQgPSByZWYoJycpOwogICAgbGV0IGVycm9yX21lc3NhZ2UgPSByZWYoJycpOwogICAgY29uc3Qgand0X3Rva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dF90b2tlbiIpOwogICAgaWYgKGp3dF90b2tlbikgewogICAgICBzdG9yZS5jb21taXQoInVwZGF0ZVRva2VuIiwgand0X3Rva2VuKTsKICAgICAgc3RvcmUuZGlzcGF0Y2goImdldGluZm8iLCB7CiAgICAgICAgc3VjY2VzcygpIHsKICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ2hvbWUnCiAgICAgICAgICB9KTsKICAgICAgICAgIHN0b3JlLmNvbW1pdCgidXBkYXRlUHVsbGluZ0luZm8iLCBmYWxzZSk7CiAgICAgICAgfSwKICAgICAgICBlcnJvcigpIHsKICAgICAgICAgIHN0b3JlLmNvbW1pdCgidXBkYXRlUHVsbGluZ0luZm8iLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHN0b3JlLmNvbW1pdCgidXBkYXRlUHVsbGluZ0luZm8iLCBmYWxzZSk7CiAgICB9CiAgICBjb25zdCBsb2dpbiA9ICgpID0+IHsKICAgICAgZXJyb3JfbWVzc2FnZS52YWx1ZSA9ICIiOwogICAgICBzdG9yZS5kaXNwYXRjaCgibG9naW4iLCB7CiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLnZhbHVlLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZC52YWx1ZSwKICAgICAgICBzdWNjZXNzKCkgewogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goImdldGluZm8iLCB7CiAgICAgICAgICAgIHN1Y2Nlc3MoKSB7CiAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogJ2hvbWUnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZXJyb3IoKSB7CiAgICAgICAgICBlcnJvcl9tZXNzYWdlLnZhbHVlID0gIueUqOaIt+WQjeaIluWvhueggemUmeivryI7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CiAgICByZXR1cm4gewogICAgICB1c2VybmFtZSwKICAgICAgcGFzc3dvcmQsCiAgICAgIGVycm9yX21lc3NhZ2UsCiAgICAgIGxvZ2luCiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";AAsBA,OAAOA,WAAU,MAAO,qCAAoC;AAC5D,SAASC,QAAO,QAAS,MAAK;AAC9B,SAASC,GAAE,QAAS,KAAI;AACxB,OAAOC,MAAK,MAAO,uBAAsB;AAEzC,eAAe;EACXC,UAAU,EAAE;IACRJ;EACJ,CAAC;EACDK,KAAK,GAAG;IACJ,MAAMC,KAAI,GAAIL,QAAQ,EAAE;IACxB,IAAIM,QAAO,GAAIL,GAAG,CAAC,EAAE,CAAC;IACtB,IAAIM,QAAO,GAAIN,GAAG,CAAC,EAAE,CAAC;IACtB,IAAIO,aAAY,GAAIP,GAAG,CAAC,EAAE,CAAC;IAE3B,MAAMQ,SAAQ,GAAIC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IACnD,IAAGF,SAAS,EAAC;MACTJ,KAAK,CAACO,MAAM,CAAC,aAAa,EAACH,SAAS,CAAC;MACrCJ,KAAK,CAACQ,QAAQ,CAAC,SAAS,EAAC;QACrBC,OAAO,GAAE;UACLZ,MAAM,CAACa,IAAI,CAAC;YAAEC,IAAI,EAAE;UAAO,CAAC,CAAC;UAC7BX,KAAK,CAACO,MAAM,CAAC,mBAAmB,EAAE,KAAK,CAAC;QAC5C,CAAC;QACDK,KAAK,GAAE;UACHZ,KAAK,CAACO,MAAM,CAAC,mBAAmB,EAAE,KAAK,CAAC;QAC5C;MACJ,CAAC;IACL,OAAM;MACFP,KAAK,CAACO,MAAM,CAAC,mBAAmB,EAAE,KAAK,CAAC;IAC5C;IAGA,MAAMM,KAAI,GAAI,MAAM;MAChBV,aAAa,CAACW,KAAI,GAAI,EAAE;MACxBd,KAAK,CAACQ,QAAQ,CAAC,OAAO,EAAE;QACpBP,QAAQ,EAAEA,QAAQ,CAACa,KAAK;QACxBZ,QAAQ,EAAEA,QAAQ,CAACY,KAAK;QACxBL,OAAO,GAAG;UACNT,KAAK,CAACQ,QAAQ,CAAC,SAAS,EAAE;YACtBC,OAAO,GAAG;cACNZ,MAAM,CAACa,IAAI,CAAC;gBAAEC,IAAI,EAAE;cAAO,CAAC,CAAC;YAEjC;UACJ,CAAC;QACL,CAAC;QACDC,KAAK,GAAG;UACJT,aAAa,CAACW,KAAI,GAAI,UAAU;QACpC;MACJ,CAAC;IACL;IAEA,OAAO;MACHb,QAAQ;MACRC,QAAQ;MACRC,aAAa;MACbU;IACJ;EACJ;AACJ","names":["ContentBase","useStore","ref","router","components","setup","store","username","password","error_message","jwt_token","localStorage","getItem","commit","dispatch","success","push","name","error","login","value"],"sourceRoot":"","sources":["/Users/apple/Desktop/课程/Java/java课程设计/charging_station/web/src/views/user/account/UserAccountLoginView.vue"],"sourcesContent":["<template>\n    <ContentBase v-if=\"!$store.state.user.pulling_info\">\n        <div class=\"row justify-content-md-center\">\n            <div class=\"col-3\">\n                <form @submit.prevent=\"login\">\n                    <div class=\"mb-3\">\n                        <label for=\"username\" class=\"form-label\">用户名</label>\n                        <input v-model=\"username\" type=\"text\" class=\"form-control\" id=\"username\" placeholder=\"请输入用户名\">\n                    </div>\n                    <div class=\"mb-3\">\n                        <label for=\"password\" class=\"form-label\">密码</label>\n                        <input v-model=\"password\" type=\"password\" class=\"form-control\" id=\"password\" placeholder=\"请输入密码\">\n                    </div>\n                    <div class=\"error-message\">{{ error_message }}</div>\n                    <button type=\"submit\" class=\"btn btn-success\">提交</button>\n                </form>\n            </div>\n        </div>\n    </ContentBase>\n</template>\n\n<script>\nimport ContentBase from '../../../components/ContentBase.vue'\nimport { useStore } from 'vuex'\nimport { ref } from 'vue'\nimport router from '../../../router/index'\n\nexport default {\n    components: {\n        ContentBase\n    },\n    setup() {\n        const store = useStore();\n        let username = ref('');\n        let password = ref('');\n        let error_message = ref('');\n\n        const jwt_token = localStorage.getItem(\"jwt_token\");\n        if(jwt_token){\n            store.commit(\"updateToken\",jwt_token);\n            store.dispatch(\"getinfo\",{\n                success(){\n                    router.push({ name: 'home' });\n                    store.commit(\"updatePullingInfo\", false);\n                },\n                error(){\n                    store.commit(\"updatePullingInfo\", false);\n                }\n            })\n        } else{\n            store.commit(\"updatePullingInfo\", false);\n        }\n        \n\n        const login = () => {\n            error_message.value = \"\";\n            store.dispatch(\"login\", {\n                username: username.value,\n                password: password.value,\n                success() {\n                    store.dispatch(\"getinfo\", {\n                        success() {\n                            router.push({ name: 'home' });\n\n                        }\n                    })\n                },\n                error() {\n                    error_message.value = \"用户名或密码错误\";\n                }\n            })\n        }\n\n        return {\n            username,\n            password,\n            error_message,\n            login,\n        }\n    }\n}\n</script>\n\n<style scoped>\nbutton {\n    width: 100%;\n}\ndiv.error-message {\n    color: red;\n}\n</style>"]}]}